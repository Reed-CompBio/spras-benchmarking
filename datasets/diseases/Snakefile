from cache import link

rule all:
    input:
        "GS_files/Alopecia_areata_GS.txt",
        "GS_files/Diabetes_mellitus_GS.txt",
        "prize_files/alopecia_areata_prizes.txt",
        "prize_files/diabetes_mellitus_prizes.txt"

rule fetch:
    output:
        a="raw/human_disease_knowledge_filtered.tsv",
        b="raw/human_disease_textmining_filtered.tsv",
        c="raw/HumanDO.tsv",
        d="raw/tiga_gene-trait_stats.tsv",
        e="raw/ensg-ensp.tsv"
        f="raw/9606.protein.links.v12.0.txt",
        g="raw/9606.protein.aliases.v12.0.txt"
    run:
        link(output.a, ["DISEASES", "human_disease_textmining_filtered.tsv"])
        link(output.b, ["DISEASES", "human_disease_textmining_filtered.tsv"])
        link(output.c, ["DISEASES", "HumanDO.tsv"])
        link(output.d, ["DISEASES", "tiga_gene-tra)it_stats.tsv"])
        link(output.e, ["BioMart", "ensg-ensp.tsv"])
        link(output.f, ["STRING", "9606", "9606.protein.links.v12.0.txt"])
        link(output.g, ["STRING", "9606", "9606.protein.aliases.v12.0.txt"])

rule inputs:
    input:
        "raw/HumanDO.tsv",
        "raw/tiga_gene-trait_stats.tsv",
        "raw/9606.protein.aliases.v12.0.txt"
    output:
        "data/inputs.csv"
    shell:
        "uv run scripts/inputs.py"

rule gold_standard:
    input:
        "raw/human_disease_knowledge_filtered.tsv",
        "raw/human_disease_textmining_filtered.tsv",
        "raw/9606.protein.aliases.v12.0.txt"
    output:
        "data/gold_standard.csv"
    shell:
        "uv run scripts/gold_standard.py"

rule files:
    input:
        "data/inputs.csv",
        "data/gold_standard.csv",
        "raw/9606.protein.links.v12.0.txt"
    output:
        # These are the two we use for the SPRAS run for now
        "GS_files/Alopecia_areata_GS.txt",
        "GS_files/Diabetes_mellitus_GS.txt",
        "prize_files/alopecia_areata_prizes.txt",
        "prize_files/diabetes_mellitus_prizes.txt"
    shell:
        "uv run scripts/files.py"
