include: "../../cache/Snakefile"

rule all:
    input:
        "GS_files/Alopecia_areata_GS.txt",
        "GS_files/Diabetes_mellitus_GS.txt",
        "prize_files/alopecia_areata_prizes.txt",
        "prize_files/diabetes_mellitus_prizes.txt"

produce_fetch_rules({
    "raw/human_disease_textmining_filtered.tsv": ["DISEASES", "human_disease_textmining_filtered.tsv"],
    "raw/human_disease_knowledge_filtered.tsv": ["DISEASES", "human_disease_knowledge_filtered.tsv"],
    "raw/HumanDO.tsv": ["DISEASES", "HumanDO.tsv"],
    "raw/tiga_gene-trait_stats.tsv": ["DISEASES", "tiga_gene-trait_stats.tsv"],
    "raw/ensg-ensp.tsv": ["BioMart", "ensg-ensp.tsv"],
    "raw/9606.protein.links.txt": FetchConfig(["STRING", "9606", "9606.protein.links.txt.gz"], uncompress=True),
    "raw/9606.protein.aliases.txt": FetchConfig(["STRING", "9606", "9606.protein.aliases.txt.gz"], uncompress=True),
})

rule inputs:
    input:
        "raw/HumanDO.tsv",
        "raw/tiga_gene-trait_stats.tsv",
        "raw/9606.protein.aliases.txt"
    output:
        "data/inputs.csv"
    shell:
        "uv run scripts/inputs.py"

rule gold_standard:
    input:
        "raw/human_disease_knowledge_filtered.tsv",
        "raw/human_disease_textmining_filtered.tsv",
        "raw/9606.protein.aliases.txt",
        "raw/ensg-ensp.tsv"
    output:
        "data/gold_standard.csv"
    shell:
        "uv run scripts/gold_standard.py"

rule files:
    input:
        "data/inputs.csv",
        "data/gold_standard.csv",
        "raw/9606.protein.links.txt"
    output:
        # These are the two we use for the SPRAS run for now
        "GS_files/Alopecia_areata_GS.txt",
        "GS_files/Diabetes_mellitus_GS.txt",
        "prize_files/alopecia_areata_prizes.txt",
        "prize_files/diabetes_mellitus_prizes.txt"
    shell:
        "uv run scripts/files.py"
